[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Template = Package['templating-runtime'].Template;\nvar _ = Package.underscore._;\nvar ReactiveVar = Package['reactive-var'].ReactiveVar;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar TemplateVar;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                            //\n// packages/frozeman_template-var/TemplateVar.js                                                              //\n//                                                                                                            //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                              //\n/**                                                                                                           // 1\nTemplate helpers                                                                                              // 2\n                                                                                                              // 3\n@module package frozeman:template-var                                                                         // 4\n**/                                                                                                           // 5\n                                                                                                              // 6\n                                                                                                              // 7\n/**                                                                                                           // 8\nThe `TemplateVar` provides reactive variables for template instances.                                         // 9\n                                                                                                              // 10\nNote! The reactive variables, are not preserved over hot code reloads, like the Meteor `Session` object does.\n                                                                                                              // 12\n                                                                                                              // 13\nTo set and get properties inside template helpers, hooks and events do as follow:                             // 14\n                                                                                                              // 15\n    // set a property                                                                                         // 16\n    TemplateVar.set('myProperty', 'myValue');                                                                 // 17\n                                                                                                              // 18\n    // to get it inside a helper, or callback                                                                 // 19\n    TemplateVar.get('myProperty');                                                                            // 20\n                                                                                                              // 21\n                                                                                                              // 22\n@class TemplateVar                                                                                            // 23\n@constructor                                                                                                  // 24\n**/                                                                                                           // 25\nTemplateVar = {                                                                                               // 26\n                                                                                                              // 27\n    /**                                                                                                       // 28\n    Gets the current template instance and returns also the correct keys and values.                          // 29\n                                                                                                              // 30\n    @method _getTemplateInstance                                                                              // 31\n    @param {Object} givenTemplate            the current template                                             // 32\n    @param {String} key                 the given key                                                         // 33\n    @param {Mixed} value                the value to set                                                      // 34\n    @return {String} The generated key name.                                                                  // 35\n    **/                                                                                                       // 36\n    _getTemplateInstance: function(givenTemplate, key, value){                                                // 37\n        var template = null;                                                                                  // 38\n                                                                                                              // 39\n        // try if a template instance was given                                                               // 40\n        if(_.isObject(givenTemplate) && (givenTemplate.hasOwnProperty('_templateInstance') || givenTemplate.hasOwnProperty('view'))) {\n                                                                                                              // 42\n            // if it couldn't get the template, check if a template instance was given.                       // 43\n            if(givenTemplate.hasOwnProperty('_templateInstance'))                                             // 44\n                template = givenTemplate;                                                                     // 45\n            else if(givenTemplate.hasOwnProperty('view'))                                                     // 46\n                template = givenTemplate.view;                                                                // 47\n                                                                                                              // 48\n        // otherwise try to get one yourself                                                                  // 49\n        } else {                                                                                              // 50\n            try {                                                                                             // 51\n                                                                                                              // 52\n                if(givenTemplate === 'waiting') {                                                             // 53\n                    return;                                                                                   // 54\n                }                                                                                             // 55\n                                                                                                              // 56\n                template = Template.instance().view;                                                          // 57\n                value = key;                                                                                  // 58\n                key = givenTemplate;                                                                          // 59\n                                                                                                              // 60\n            } catch(e) {                                                                                      // 61\n                throw new Meteor.Error('TemplateVar: works only from withing template helpers, callbacks or events. Additonally you can pass a template instance as the first parameter.');\n            }                                                                                                 // 63\n        }                                                                                                     // 64\n                                                                                                              // 65\n                                                                                                              // 66\n                                                                                                              // 67\n                                                                                                              // 68\n        // move on view up if its a #with, #if or #unless                                                     // 69\n        while(template.name.indexOf('Template.') === -1 && template.parentView) {                             // 70\n            template = template.parentView;                                                                   // 71\n        }                                                                                                     // 72\n                                                                                                              // 73\n        // make sure the template session object exists                                                       // 74\n        if(template && !template._templateVar)                                                                // 75\n            template._templateVar = {};                                                                       // 76\n                                                                                                              // 77\n        // create Reactive var, if not existing                                                               // 78\n        if(template && !template._templateVar[key])                                                           // 79\n            template._templateVar[key] = new ReactiveVar(value);                                              // 80\n                                                                                                              // 81\n                                                                                                              // 82\n        // build the keyname                                                                                  // 83\n        return {                                                                                              // 84\n            key: key,                                                                                         // 85\n            value: value,                                                                                     // 86\n            template: template                                                                                // 87\n        };                                                                                                    // 88\n    },                                                                                                        // 89\n                                                                                                              // 90\n    /**                                                                                                       // 91\n    Gets the template instance form an DOM selector of an element within.                                     // 92\n                                                                                                              // 93\n    @method _getTemplateInstance                                                                              // 94\n    @param {String} selector            an element withing the template to get                                // 95\n    @return {Object} The template instace                                                                     // 96\n    **/                                                                                                       // 97\n    _getTemplateInstanceBySelector: function(selector){                                                       // 98\n                                                                                                              // 99\n        var view;                                                                                             // 100\n                                                                                                              // 101\n        try {                                                                                                 // 102\n            view = Blaze.getView($(selector)[0]);                                                             // 103\n        } catch(e) {                                                                                          // 104\n                                                                                                              // 105\n        }                                                                                                     // 106\n                                                                                                              // 107\n        // set interval until elemtn appears and re-call funciton????                                         // 108\n        if(selector && view) {                                                                                // 109\n                                                                                                              // 110\n            // move on view up if its a #with, #if or #unless                                                 // 111\n            while(view.name.indexOf('Template.') === -1 && view.parentView) {                                 // 112\n                view = view.parentView;                                                                       // 113\n            }                                                                                                 // 114\n                                                                                                              // 115\n            if(!view || !view.templateInstance)                                                               // 116\n                return;                                                                                       // 117\n                                                                                                              // 118\n            // view is not yet rendered, wait for it and recall this function                                 // 119\n            if(!view.isRendered) {                                                                            // 120\n                var wait = new ReactiveVar(false);                                                            // 121\n                // make reactive                                                                              // 122\n                wait.get();                                                                                   // 123\n                Blaze.getView($(selector)[0]).onViewReady(function(){                                         // 124\n                    if(wait)                                                                                  // 125\n                        wait.set(true);                                                                       // 126\n                    wait = null;                                                                              // 127\n                });                                                                                           // 128\n                                                                                                              // 129\n                return 'waiting';                                                                             // 130\n            }                                                                                                 // 131\n                                                                                                              // 132\n            return view.templateInstance();                                                                   // 133\n                                                                                                              // 134\n        } else {                                                                                              // 135\n            console.warn('TemplateVar: Couldn\\'t find an element within a template matching the selector \"'+ selector +'\"');\n            return null;                                                                                      // 137\n        }                                                                                                     // 138\n    },                                                                                                        // 139\n                                                                                                              // 140\n                                                                                                              // 141\n    // PUBLIC                                                                                                 // 142\n                                                                                                              // 143\n    /**                                                                                                       // 144\n    When get is called we use the ReactiveVar.get from the template instance.                                 // 145\n                                                                                                              // 146\n    @method get                                                                                               // 147\n    @param {Object} template            the current template                                                  // 148\n    @param {String} propertyName     The name of the property you want to get. Should consist of the `'myPropertyName'`\n    @return {Mixed} The stored value.                                                                         // 150\n    **/                                                                                                       // 151\n    get: function (template, propertyName) {                                                                  // 152\n        var values = TemplateVar._getTemplateInstance(template, propertyName);                                // 153\n                                                                                                              // 154\n        return values.template._templateVar[values.key].get();                                                // 155\n    },                                                                                                        // 156\n                                                                                                              // 157\n                                                                                                              // 158\n    /**                                                                                                       // 159\n    When set is called every depending reactive function where `TemplateVar.get()` with the same key is called will rerun.\n                                                                                                              // 161\n    @method set                                                                                               // 162\n    @param {Object} template            the current template                                                  // 163\n    @param {String} propertyName     The name of the property you want to get. Should consist of the `'templateName->myPropertyName'`\n    @param {String|Object} value     If the value is a string with `rerun`, then it will be rerun all dependent functions where get `TemplateInstance.get()` was called.\n    @return undefined                                                                                         // 166\n    **/                                                                                                       // 167\n    set: function (template, propertyName, value) {                                                           // 168\n        var values = TemplateVar._getTemplateInstance(template, propertyName, value);                         // 169\n                                                                                                              // 170\n        values.template._templateVar[values.key].set(values.value);                                           // 171\n    },                                                                                                        // 172\n                                                                                                              // 173\n                                                                                                              // 174\n    /**                                                                                                       // 175\n    When get is called we use the ReactiveVar.get from the template instance.                                 // 176\n                                                                                                              // 177\n    @method get                                                                                               // 178\n    @param {Object} selector         a selector of an element within another template                         // 179\n    @param {String} propertyName     The name of the property you want to get. Should consist of the `'myPropertyName'`\n    @return {Mixed} The stored value.                                                                         // 181\n    **/                                                                                                       // 182\n    getFrom: function (selector, propertyName) {                                                              // 183\n        var template = TemplateVar._getTemplateInstanceBySelector(selector);                                  // 184\n        if(!template)                                                                                         // 185\n            return;                                                                                           // 186\n        var values = TemplateVar._getTemplateInstance(template, propertyName);                                // 187\n                                                                                                              // 188\n        if(values)                                                                                            // 189\n            return values.template._templateVar[values.key].get();                                            // 190\n    },                                                                                                        // 191\n                                                                                                              // 192\n                                                                                                              // 193\n    /**                                                                                                       // 194\n    When set is called every depending reactive function where `TemplateVar.get()` with the same key is called will rerun.\n                                                                                                              // 196\n    @method set                                                                                               // 197\n    @param {Object} selector         a selector of an element within another template                         // 198\n    @param {String} propertyName     The name of the property you want to get. Should consist of the `'templateName->myPropertyName'`\n    @param {String|Object} value     If the value is a string with `rerun`, then it will be rerun all dependent functions where get `TemplateInstance.get()` was called.\n    @return undefined                                                                                         // 201\n    **/                                                                                                       // 202\n    setTo: function (selector, propertyName, value) {                                                         // 203\n        var template = TemplateVar._getTemplateInstanceBySelector(selector);                                  // 204\n        if(!template)                                                                                         // 205\n            return;                                                                                           // 206\n        var values = TemplateVar._getTemplateInstance(template, propertyName, value);                         // 207\n                                                                                                              // 208\n        if(values)                                                                                            // 209\n            values.template._templateVar[values.key].set(values.value);                                       // 210\n    }                                                                                                         // 211\n};                                                                                                            // 212\n                                                                                                              // 213\n// Register Global helpers                                                                                    // 214\n/**                                                                                                           // 215\nGlobal TemplateVar helper                                                                                     // 216\n                                                                                                              // 217\n@method (TemplateVar)                                                                                         // 218\n**/                                                                                                           // 219\nTemplate.registerHelper('TemplateVar', function(name){                                                        // 220\n    return {                                                                                                  // 221\n        get: TemplateVar.get.bind(this, Template.instance()),                                                 // 222\n        set: TemplateVar.set.bind(this, Template.instance()),                                                 // 223\n        getFrom: TemplateVar.getFrom.bind(this),                                                              // 224\n        setTo: TemplateVar.setTo.bind(this)                                                                   // 225\n    };                                                                                                        // 226\n});                                                                                                           // 227\n                                                                                                              // 228\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\n(function (pkg, symbols) {\n  for (var s in symbols)\n    (s in pkg) || (pkg[s] = symbols[s]);\n})(Package['frozeman:template-var'] = {}, {\n  TemplateVar: TemplateVar\n});\n\n})();\n","servePath":"/packages/frozeman_template-var.js"}]